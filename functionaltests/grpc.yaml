vars:
  service_host: localhost:50051
  service: functionaltest.EchoService

calls:
- name: fetch
  type: grpc
  service-host: '{{ .service_host }}'
  url: '{{ .service }}/Echo'
  body:
    message: foo
  exports:
  - jq: '.message'
    as: 'msg'
- name: repush
  type: grpc
  service-host: '{{ .service_host }}'
  url: '{{ .service }}/Echo'
  body:
    message: '{{ .msg }}'
  asserts:
  - jq: '.message'
    expected: 'foo'
- name: expectedErr
  type: grpc
  service-host: '{{ .service_host }}'
  url: '{{ .service }}/Err'
  body:
    code: 5
  want-status: 5
